使用說明

範例影片
http://hirokofan.pixnet.net/album/video/219815096
批次檔下載
http://hirokofan.myweb.hinet.net/temp/p-m2video.zip
圖文說明
http://hirokofan.pixnet.net/blog/post/39373739

一、用途
二、使用步驟
三、相關檔案說明
四、注意事項
五、進階設定
六、已知問題


一、用途
簡易製作連續播放圖片的影片檔，顯示圖片時有淡入淡出效果，請參考範例影片


二、使用步驟
1.下載並解開壓縮檔
2.選取圖片（jpg檔）並拉到「多圖合音step1.bat」上
3.選取音樂（如mp3、m4a檔）並拉到「多圖合音step2.bat」上
4.轉完收工


三、相關檔案說明
1.setup.bat			設定檔
2.多圖合音step1.bat		將圖片轉成影片片段
3.多圖合音step2.bat		將影片片段和音樂檔結合
4.多圖合音清暫存.bat		將暫存的影片檔刪除
5.多圖合音複製暫存影片.bat	將暫存的影片檔複製出來，若未指定位置則會複製到與批次檔相同位置

工作原理
1.把來源圖片檔複製到工作區，用ffmpeg處理成影片片段
2.用ffmpeg將影片片段拼合成暫存影片（到參考的時間長度）
3.將暫存影片和來源音效檔合成影片


四、注意事項
1.來源圖片
2.來源音效
3.輸出影片
4.檔名問題

1.來源圖片
需要jpg檔，寬高要2的倍數，建議使用影像軟體處理成相同尺寸再交給批次檔轉換
另一種方式是參考進階設定修改setup.bat內容指定轉出寬高

2.來源音效
經測試mp3和m4a都可以，預設音效是直接複製，若無法轉出或轉出後無法播放，可以參考進階設定修改setup.bat內容指定音效轉檔和音效位元率

3.輸出影片
影片片段是msmpeg4（副檔名.avi），檔名與來源圖片相同
暫存影片由影片片段拼合到指定的時間長度（可能會超過），檔名為output.avi
完成影片是x264（副檔名.mp4），檔名與來源音效相同
完成影片的時間長度可能比音樂檔多幾秒

4.檔名問題
檔名不論是中文、日文還是萬年遺毒UAO都OK（但=不行）


五、進階設定（以文字編輯器編輯setup.bat）
1.FFmpeg位置：FF
2.工作區路徑：WP
3.輸出路徑：DP
4.音樂檔參考長度（秒）：ML
5.影片片段時間（秒）：CT
6.淡入淡出時間（秒）：FT
7.是否調整影片尺寸：RS
7-1.輸出的影片寬x高：WH
8.畫質設定：VQ
9.音效轉檔：CA
9-1.音效位元率：AB

1.FFmpeg位置：FF
批次檔會自動偵測ffmpeg位置，亦可自行輸入，建議用WinFF附的就好（個人使用的是WinFF 1.40）
若同時偵測到多個ffmpeg.exe依照順序使用
	a.使用者指定的位置
	b.與批次檔相同目錄的ffmpeg
	c.64位元的WinFF預設目錄
	d.32位元的WinFF預設目錄

FFmpeg
http://www.ffmpeg.org/

FFmpeg Windows（Zeranoe FFmpeg Builds. ）
http://ffmpeg.zeranoe.com/builds/

WinFF
http://winff.org/

2.工作區路徑：WP
影片片段和暫存影片會放在這邊，預設為系統暫存區%temp%\

3.輸出路徑：DP
預設輸出路徑與來源檔案相同（DP=0），可自行指定

4.音樂檔參考長度（秒）：ML
不需精確，只要比音樂檔長即可（超過的部份會播自動截掉），設太大只是浪費時間空間
預設360秒（6分鐘）

5.影片片段時間（秒）：CT
每個圖片顯示的時間，預設5秒，請注意這包含淡入淡出的時間

6.淡入淡出時間（秒）：FT
預設1秒，請注意這個值不能超過片段時間的1/2（這部份沒有做檢查）

7.是否調整影片尺寸：RS
7-1.輸出的影片寬x高：WH
有設定調整影片尺寸（RS=1），輸出寬高才有作用，如果圖檔都已經調整為相同尺寸此處選否
如果要調整影片尺寸，輸出的影片寬x高，可直接指定尺寸如848x480，但注意必須都是2的倍數。由於是不管比例把圖直接縮放成指定大小，並非最佳效果，建議不要用這功能，把圖都做好再轉
預設不調整影片尺寸（RS=0）

8.畫質設定：VQ
設定畫質，數字越小畫質越好檔案越大，參考值：15超高/25很高/35高
預設為25

9.音效轉檔：CA
9-1.音效位元率：AB
有設定音效轉檔（CA=1），位元率設定才有作用，越大檔案越大
參考值：256超/192優/128良/96可/64差
預設是直接複製（CA=0）


六、已知問題
影片到最後會比音樂長一點，和音樂的長短無關，與電腦處理能力和圖檔內容有關，
電腦運算處理能力強→時間差增加
圖檔尺寸大內容複雜→時間差減小

若不是使用WinFF的ffmpeg.exe可能會出現錯誤訊息（紅色的「Unknown encoder 'libfaac'」），請以「若有libfaac錯誤請改用這裡」資料夾下的setup.bat取代現有檔案，或是將第40行修改成
set CA=aac -ab %AB%k -strict -2