使用說明

範例影片
http://hirokofan.pixnet.net/album/video/220409408
批次檔下載
http://hirokofan.myweb.hinet.net/temp/p-m2video.zip
圖文說明
http://hirokofan.pixnet.net/blog/post/39373739

一、用途
二、使用步驟
三、相關檔案說明
四、注意事項
五、進階設定
六、已知問題


一、用途
簡易製作連續播放圖片的影片檔，顯示圖片時有淡入淡出效果，
可增加logo圖或文字（檔名、時間、固定文字）請參考範例影片


二、使用步驟
1.下載並解開壓縮檔
2.選取圖片（jpg檔）並拉到「多圖合音step1.bat」上
3.選取音樂（如mp3、m4a檔）並拉到「多圖合音step2.bat」上
4.轉完收工


三、相關檔案說明
1.setup.bat			設定檔
2.多圖合音step1.bat		將圖片轉成影片片段
3.多圖合音step2.bat		將影片片段和音樂檔結合
4.多圖合音清暫存.bat		將暫存的影片檔刪除
5.多圖合音複製暫存影片.bat	將暫存的影片檔複製出來，若未指定位置則會複製到與批次檔相同位置
6.多圖合音設定檢查.bat		可檢視各項參數設定
7.複製WinFF的ffmpeg		將已經安裝的WinFF的ffmpeg.exe複製到批次檔所在（加字對策）
8.filename0.ass			影片加字用的樣板字幕檔，編碼必須是big5
9.win_iconv.exe			將字幕檔從big5轉碼成utf-8用，取自
				http://code.google.com/p/win-iconv/
10.fonts/fonts.conf		影片加字用，需將資料夾複製到ffmpeg.exe所在處

工作原理
1.把來源圖片檔複製到工作區，用ffmpeg處理成影片片段
2.用ffmpeg將影片片段拼合成暫存影片（到參考的時間長度）
3.將暫存影片和來源音效檔合成影片


四、注意事項
1.來源圖片
2.來源音效
3.輸出影片
4.檔名問題
5.影片加字
6.影片logo圖

1.來源圖片
需要jpg檔，寬高要2的倍數，建議使用影像軟體處理成相同尺寸再交給批次檔轉換
另一種方式是參考進階設定修改setup.bat內容指定轉出寬高

2.來源音效
經測試mp3和m4a都可以，預設音效是直接複製，若無法轉出或轉出後無法播放，可以參考進階設定修改setup.bat內容指定音效轉檔和音效位元率

3.輸出影片
影片片段是msmpeg4（副檔名.avi），檔名與來源圖片相同
暫存影片由影片片段拼合到指定的時間長度（可能會超過），檔名為output.avi
完成影片是x264（副檔名.mp4），檔名與來源音效相同
完成影片的時間長度可能比音樂檔多幾秒

4.檔名問題
檔名不論是中文、日文還是萬年遺毒UAO都OK（但=()等特殊符號不行）

5.影片加字
以字幕的方式加入，可選擇自動加上各圖檔的檔名、時間；固定文字以及顯示設定（如文字大小顏色）直接修改filename0.ass樣板
若是使用WinFF的ffmepg.exe的話需要1.50以上才支援
使用影片加字功能需要將批次檔的fonts資料夾複製到ffmpeg所在處，或將ffmpeg複製到批次檔所在

6.影片logo圖
將logo.png或logo.jpg複製到批次檔所在處，可選擇要放在哪個角落


五、進階設定（以文字編輯器編輯setup.bat）
1.FFmpeg位置：FF
2.工作區路徑：WP
3.輸出路徑：DP
4.音樂檔參考長度（秒）：ML
5.影片片段時間（秒）：CT
6.淡入淡出時間（秒）：FT
7.是否調整影片尺寸：RS
7-1.輸出的影片寬x高：WH
8.畫質設定：VQ
9.音效轉檔：CA
9-1.音效位元率：AB
10.影片加字：ST
11.影片加logo圖：WMA
11-1.logo圖距離邊界的水平距離（像素）：WMW
11-2.logo圖距離邊界的垂直距離（像素）：WMH
12.只轉部分(時間)片段：CV
12-1.設定開始擷取的時間(時:分:秒)：SS
12-2.設定要擷取的時間(時:分:秒)：DT


1.FFmpeg位置：FF
批次檔會自動偵測ffmpeg位置，亦可自行輸入，建議用WinFF附的就好（影片加字要WinFF 1.50以上才行）
若同時偵測到多個ffmpeg.exe依照順序使用
	a.使用者指定的位置
	b.與批次檔相同目錄的ffmpeg
	c.64位元的WinFF預設目錄
	d.32位元的WinFF預設目錄

FFmpeg
http://www.ffmpeg.org/

FFmpeg Windows（Zeranoe FFmpeg Builds. ）
http://ffmpeg.zeranoe.com/builds/

WinFF
http://winff.org/

2.工作區路徑：WP
影片片段和暫存影片會放在這邊，預設為系統暫存區%temp%\

3.輸出路徑：DP
預設輸出路徑與來源檔案相同（DP=0），可自行指定

4.音樂檔參考長度（秒）：ML
不需精確，只要比音樂檔長即可（超過的部份會播自動截掉），設太大只是浪費時間空間
預設360秒（6分鐘）

5.影片片段時間（秒）：CT
每個圖片顯示的時間，預設5秒，請注意這包含淡入淡出的時間

6.淡入淡出時間（秒）：FT
預設1秒，請注意這個值不能超過片段時間的1/2（這部份沒有做檢查）

7.是否調整影片尺寸：RS
7-1.輸出的影片寬:高：WH
有設定調整影片尺寸（RS=1），輸出寬高才有作用，如果圖檔都已經調整為相同尺寸此處選否
如果要調整影片尺寸，輸出的影片寬:高，可直接指定尺寸如848:480
由於是不管比例把圖直接縮放成指定大小，並非最佳效果，建議不要用這功能把圖都做好再轉
iw/2:-1表示寬度為來源檔案的一半，高度自動計算，但注意必須都是2的倍數，此外若圖片尺寸不一樣時轉出來的影片會亂掉
預設不調整影片尺寸（RS=0）

8.畫質設定：VQ
設定畫質，數字越小畫質越好檔案越大，參考值：15超高/25很高/35高
預設為25

9.音效轉檔：CA
9-1.音效位元率：AB
有設定音效轉檔（CA=1），位元率設定才有作用，越大檔案越大
參考值：256超/192優/128良/96可/64差
預設是直接複製（CA=0）

10.影片加字：ST
影片加字（檔名、時間、指定字串）指定字串直接編輯filename0.ass
0不加
1只有指定字串
2檔名+指定字串
3時間+指定字串
6檔名+時間+指定字串
預設不使用（ST=0）

11.影片加logo圖：WMA
11-1.logo圖距離邊界的水平距離（像素）：WMW
11-2.logo圖距離邊界的垂直距離（像素）：WMH
影片加Logo圖，位置1↙、3↘、7↖、9↗，0表示不使用
預設不使用（WMA=0）
logo圖需放在批次檔相同目錄，logo.jpg或logo.png，png優先，支援透明色

12.只轉部分(時間)片段：CV
12-1.設定開始擷取的時間(時:分:秒)：SS
12-2.設定要擷取的時間(時:分:秒)：DT
只轉部份片段，注意擷取的時間不是結束時間
預設不使用（CV=0）

六、已知問題
影片到最後會比音樂長一點，和音樂的長短無關，與電腦處理能力和圖檔內容有關，
電腦運算處理能力強→時間差增加
圖檔尺寸大內容複雜→時間差減小
